<div class="backdrop" *ngIf="isLoading"></div>
<div class="loading-container" *ngIf="isLoading">
    <div class="loadingio-spinner-eclipse-xuonbou5rb">
      <div class="ldio-t9kn6m430qe">
        <div></div>
      </div>
    </div>
  
      <style type="text/css">
      @keyframes ldio-t9kn6m430qe {
        0% { transform: rotate(0deg) }
        50% { transform: rotate(180deg) }
        100% { transform: rotate(360deg) }
      }
      .ldio-t9kn6m430qe div {
        position: absolute;
        animation: ldio-t9kn6m430qe 1s linear infinite;
        width: 160px;
        height: 160px;
        top: 20px;
        left: 20px;
        border-radius: 50%;
        box-shadow: 0 7.2px 0 0 #f6ae2d;
        transform-origin: 80px 83.6px;
      }
      .loadingio-spinner-eclipse-xuonbou5rb {
        width: 200px;
        height: 200px;
        display: inline-block;
        overflow: hidden;
        background: transparent;
      }
      .ldio-t9kn6m430qe {
        width: 100%;
        height: 100%;
        position: relative;
        transform: translateZ(0) scale(1);
        backface-visibility: hidden;
        transform-origin: 0 0; /* see note above */
      }
      .ldio-t9kn6m430qe div { box-sizing: content-box; }
      /* generated by https://loading.io/ */
      </style>
</div>

<div class="wrapper">
    <button class="bk-btn" (click)="onBack()">
        <i class="fas fa-arrow-circle-left"></i>
    </button>

    <main class="order-details">
        <h1 class="details-header">Order Details</h1>

        <button class="sts-btn" (click)="onToggleStatus()">
            {{ order.fulfilled ? 'Unfulfill' : 'Fulfill' }}
        </button>

        <div class="divider"></div>

        <div class="list-wrapper">
            <app-detail-item *ngFor="let item of order.items" 
                [name]="item.product.name" 
                [price]="item.product.price" 
                [quantity]="item.quantity">
            </app-detail-item>
        </div>

        <div class="divider"></div>

        <div class="finances">
            <h2 class="detail-title">Finances</h2>
            <h3 class="details">Delivery Fees: {{ order.deliveryFees | currency}}</h3>
            <h3 class="details">HST: {{ order.hst | currency}}</h3>
            <h3 class="details">TIP: {{ order.chargedTip | currency }} ({{ order.tip }}%)</h3>
            <h3 class="details">Total: {{ order.total | currency }}</h3>
        </div>

        <div class="divider"></div>

        <div class="client">
            <h2 class="detail-title">Client Info</h2>
            <h3 class="details">{{ order.clientname }}</h3>
            <h3><a [href]="'mailto:'+order.email" class="details">{{ order.email }}</a></h3>
            <h3><a [href]="'tel:'+order.phone" class="details">{{ order.phone }}</a></h3>
        </div>
    </main>
</div>
